# EuroPi Lorenz Attractor. Chaotic modulator

author: Sean Bechhofer (github.com/seanbechhofer)

date: 2022-03-15

labels: gates, triggers, randomness

Lorenz is a source of chaotic modulation based on a Lorenz Attractor:
https://en.wikipedia.org/wiki/Lorenz_system

![Lorenz System](https://upload.wikimedia.org/wikipedia/commons/1/13/A_Trajectory_Through_Phase_Space_in_a_Lorenz_Attractor.gif)

Outputs 1, 2 and 3 are based on the x, y and z values generated by the
attractor.

Outputs 4, 5 and 6 are gates based on the values of x, y and z and
relationships between them.


Credits:
- The Europi hardware and firmware was designed by Allen Synthesis: https://github.com/Allen-Synthesis/EuroPi

# Controls

- digital_in: Pause motion when HIGH
- analog_in: 

- knob_1: Adjust speed
- knob_2: Adjust threshold for triggers

- button_1: Decrease output voltage range
- button_2: Increase output voltage range

- output_1: x 
- output_2: y
- output_3: z
- output_4: triggers/gates
- output_5: triggers/gates
- output_6: triggers/gates

# Getting Started

Outputs 1-3 provide chaotic shifting voltages.
Outputs 4-6 provide gates/triggers. 

## Basic Usage
1. Connect outputs to modules
2. Enjoy randomness

## Controls
1. Knob 1 controls the speed. The sensitivity changes at noon,
allowing for very slow or very fast modulatiom.
2. Knob 2 adjusts the threshold used for triggers.
3. Buttons 1/2 reduce/increase the max output voltage of the CV outputs,
from 1V to 5V.
4. If the digital input is HIGH, change is paused.

## Details

The Lorenz System can be used to describe a point moving in 3-D
space. Three parameters, *r*,*s* and *b* are given: the defaults are
10, 8/3 and 28, values known to produce chaotic behavious. The *x*, *y*, *z*
coordinates are then be used to generate control voltages and
triggers. 

On start up, the code runs through a number of iterations in order to
calculate the possible output ranges of the system. This process takes
around 30 seconds. This is then used to normalise *x*, *y* and *z* values to
the range 0-100 for calculation of voltages on outputs 1, 2 and 3.

Outputs 4, 5 and 6 are triggers, with 4 giving more frequent triggers
than 5 and 6. Output 4 takes the normalised value of output 1 and sets
it HIGH if the integer portion is even. Output 5 is set high when
*(y+z - 2\*x)* is above an (adjustable) threshold, similarly for
output 6 and *(z+x - 2\*y)*.

The display will show current values for outputs 1, 2, 3, speed,
threshold, voltage range, triggers 4, 5 and 6 when HIGH and if the
movement is frozen.

If the digital input is set to HIGH, the system will pause.
